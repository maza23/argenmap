/*! For license information please see main.js.LICENSE.txt */
var GeoserviceFactory;!function(){var e={660:function(e,t,n){var r;!function(e){!function(t){var r="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=i(e);function i(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:o=i(r.Reflect,o),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!i&&!s,u={create:i?function(){return C(Object.create(null))}:s?function(){return C({__proto__:null})}:function(){return C({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function s(e,t){return[e,t]}}():Map,f=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,h=new(l||"function"!=typeof WeakMap?function(){var e=u.create(),n=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var t;do{t="@@WeakMap@@"+s()}while(u.has(e,t));return e[t]=!0,t}function o(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:u.create()})}return e[n]}function i(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):i(new Uint8Array(e),e):i(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<16;++r){var o=t[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}():WeakMap);function w(e,t,n){var r=h.get(e);if(x(r)){if(!n)return;r=new p,h.set(e,r)}var o=r.get(t);if(x(o)){if(!n)return;o=new p,r.set(t,o)}return o}function d(e,t,n){if(y(e,t,n))return!0;var r=D(t);return!E(r)&&d(e,r,n)}function y(e,t,n){var r=w(t,n,!1);return!x(r)&&!!r.has(e)}function g(e,t,n){if(y(e,t,n))return v(e,t,n);var r=D(t);return E(r)?void 0:g(e,r,n)}function v(e,t,n){var r=w(t,n,!1);if(!x(r))return r.get(e)}function m(e,t,n,r){w(n,r,!0).set(e,t)}function _(e,t){var n=b(e,t),r=D(e);if(null===r)return n;var o=_(r,t);if(o.length<=0)return n;if(n.length<=0)return o;for(var i=new f,s=[],a=0,u=n;a<u.length;a++){var c=u[a];i.has(c)||(i.add(c),s.push(c))}for(var l=0,p=o;l<p.length;l++)c=p[l],i.has(c)||(i.add(c),s.push(c));return s}function b(e,t){var n=[],r=w(e,t,!1);if(x(r))return n;for(var i=function(e){var t=M(e,o);if(!k(t))throw new TypeError;var n=t.call(e);if(!P(n))throw new TypeError;return n}(r.keys()),s=0;;){var a=O(i);if(!a)return n.length=s,n;var u=a.value;try{n[s]=u}catch(e){try{A(i)}finally{throw e}}s++}}function I(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function x(e){return void 0===e}function E(e){return null===e}function P(e){return"object"==typeof e?null!==e:"function"==typeof e}function R(e,t){switch(I(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",o=M(e,r);if(void 0!==o){var i=o.call(e,n);if(P(i))throw new TypeError;return i}return function(e,t){if("string"===t){var n=e.toString;if(k(n)&&!P(o=n.call(e)))return o;if(k(r=e.valueOf)&&!P(o=r.call(e)))return o}else{var r;if(k(r=e.valueOf)&&!P(o=r.call(e)))return o;var o,i=e.toString;if(k(i)&&!P(o=i.call(e)))return o}throw new TypeError}(e,"default"===n?"number":n)}function L(e){var t=R(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function S(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function k(e){return"function"==typeof e}function T(e){return"function"==typeof e}function M(e,t){var n=e[t];if(null!=n){if(!k(n))throw new TypeError;return n}}function O(e){var t=e.next();return!t.done&&t}function A(e){var t=e.return;t&&t.call(e)}function D(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var o=r.constructor;return"function"!=typeof o||o===e?t:o}function C(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(x(n)){if(!S(e))throw new TypeError;if(!T(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!x(r)&&!E(r)){if(!T(r))throw new TypeError;t=r}}return t}(e,t)}if(!S(e))throw new TypeError;if(!P(t))throw new TypeError;if(!P(r)&&!x(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(e,t,n,r){for(var o=e.length-1;o>=0;--o){var i=(0,e[o])(t,n,r);if(!x(i)&&!E(i)){if(!P(i))throw new TypeError;r=i}}return r}(e,t,n=L(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!P(n))throw new TypeError;if(!x(r)&&!function(e){switch(I(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;m(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!P(n))throw new TypeError;return x(r)||(r=L(r)),m(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!P(t))throw new TypeError;return x(n)||(n=L(n)),d(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!P(t))throw new TypeError;return x(n)||(n=L(n)),y(e,t,n)})),e("getMetadata",(function(e,t,n){if(!P(t))throw new TypeError;return x(n)||(n=L(n)),g(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!P(t))throw new TypeError;return x(n)||(n=L(n)),v(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!P(e))throw new TypeError;return x(t)||(t=L(t)),_(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!P(e))throw new TypeError;return x(t)||(t=L(t)),b(e,t)})),e("deleteMetadata",(function(e,t,n){if(!P(t))throw new TypeError;x(n)||(n=L(n));var r=w(t,n,!1);if(x(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var o=h.get(t);return o.delete(n),o.size>0||h.delete(t),!0}))}(o)}()}(r||(r={}))}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";var e;n.r(r),n.d(r,{Contour:function(){return ce},ElevationProfile:function(){return me},HealthCheck:function(){return _e},WaterRise:function(){return Se}}),n(660),function(e){e[e.Transient=0]="Transient",e[e.Singleton=1]="Singleton",e[e.ResolutionScoped=2]="ResolutionScoped",e[e.ContainerScoped=3]="ContainerScoped"}(e||(e={}));var t=e,o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}function c(e){return!!e.useClass}function l(e){return!!e.useFactory}var p=function(){function e(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return e.prototype.createProxy=function(e){var t,n=this,r=!1;return new Proxy({},this.createHandler((function(){return r||(t=e(n.wrap()),r=!0),t})))},e.prototype.createHandler=function(e){var t={};return this.reflectMethods.forEach((function(n){t[n]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t[0]=e();var o=Reflect[n];return o.apply(void 0,u(t))}})),t},e}();function f(e){return"string"==typeof e||"symbol"==typeof e}function h(e){return"object"==typeof e&&"token"in e&&"transform"in e}function w(e){return!!e.useToken}function d(e){return null!=e.useValue}var y=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},e.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},e.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},e.prototype.setAll=function(e,t){this._registryMap.set(e,t)},e.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},e}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(y),v=function(){this.scopedResolutions=new Map};var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(y),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(y),b=function(){this.preResolution=new m,this.postResolution=new _},I=new Map,x=new(function(){function e(e){this.parent=e,this._registry=new g,this.interceptors=new b}return e.prototype.register=function(e,n,r){var o;if(void 0===r&&(r={lifecycle:t.Transient}),o=function(e){return c(e)||d(e)||w(e)||l(e)}(n)?n:{useClass:n},w(o))for(var i=[e],s=o;null!=s;){var a=s.useToken;if(i.includes(a))throw new Error("Token registration cycle detected! "+u(i,[a]).join(" -> "));i.push(a);var p=this._registry.get(a);s=p&&w(p.provider)?p.provider:null}if((r.lifecycle===t.Singleton||r.lifecycle==t.ContainerScoped||r.lifecycle==t.ResolutionScoped)&&(d(o)||l(o)))throw new Error('Cannot use lifecycle "'+t[r.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:o,options:r}),this},e.prototype.registerType=function(e,t){return f(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},e.prototype.registerInstance=function(e,t){return this.register(e,{useValue:t})},e.prototype.registerSingleton=function(e,n){if(f(e)){if(f(n))return this.register(e,{useToken:n},{lifecycle:t.Singleton});if(n)return this.register(e,{useClass:n},{lifecycle:t.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var r=e;return n&&!f(n)&&(r=n),this.register(e,{useClass:r},{lifecycle:t.Singleton})},e.prototype.resolve=function(e,t){void 0===t&&(t=new v);var n=this.getRegistration(e);if(!n&&f(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var r=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}if(function(e){return"function"==typeof e||e instanceof p}(e))return r=this.construct(e,t),this.executePostResolutionInterceptor(e,r,"Single"),r;throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(e,t){var n,r;if(this.interceptors.preResolution.has(e)){var o=[];try{for(var i=s(this.interceptors.preResolution.getAll(e)),a=i.next();!a.done;a=i.next()){var u=a.value;"Once"!=u.options.frequency&&o.push(u),u.callback(e,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,o)}},e.prototype.executePostResolutionInterceptor=function(e,t,n){var r,o;if(this.interceptors.postResolution.has(e)){var i=[];try{for(var a=s(this.interceptors.postResolution.getAll(e)),u=a.next();!u.done;u=a.next()){var c=u.value;"Once"!=c.options.frequency&&i.push(c),c.callback(e,t,n)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,i)}},e.prototype.resolveRegistration=function(e,n){if(e.options.lifecycle===t.ResolutionScoped&&n.scopedResolutions.has(e))return n.scopedResolutions.get(e);var r,o=e.options.lifecycle===t.Singleton,i=e.options.lifecycle===t.ContainerScoped,s=o||i;return r=d(e.provider)?e.provider.useValue:w(e.provider)?s?e.instance||(e.instance=this.resolve(e.provider.useToken,n)):this.resolve(e.provider.useToken,n):c(e.provider)?s?e.instance||(e.instance=this.construct(e.provider.useClass,n)):this.construct(e.provider.useClass,n):l(e.provider)?e.provider.useFactory(this):this.construct(e.provider,n),e.options.lifecycle===t.ResolutionScoped&&n.scopedResolutions.set(e,r),r},e.prototype.resolveAll=function(e,t){var n=this;void 0===t&&(t=new v);var r=this.getAllRegistrations(e);if(!r&&f(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),r){var o=r.map((function(e){return n.resolveRegistration(e,t)}));return this.executePostResolutionInterceptor(e,o,"All"),o}var i=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,i,"All"),i},e.prototype.isRegistered=function(e,t){return void 0===t&&(t=!1),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},e.prototype.reset=function(){this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var e,t;try{for(var n=s(this._registry.entries()),r=n.next();!r.done;r=n.next()){var o=a(r.value,2),i=o[0],u=o[1];this._registry.setAll(i,u.filter((function(e){return!d(e.provider)})).map((function(e){return e.instance=void 0,e})))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.createChildContainer=function(){var n,r,o=new e(this);try{for(var i=s(this._registry.entries()),u=i.next();!u.done;u=i.next()){var c=a(u.value,2),l=c[0],p=c[1];p.some((function(e){return e.options.lifecycle===t.ContainerScoped}))&&o._registry.setAll(l,p.map((function(e){return e.options.lifecycle===t.ContainerScoped?{provider:e.provider,options:e.options}:e})))}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},e.prototype.beforeResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},e.prototype.afterResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},e.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},e.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},e.prototype.construct=function(e,t){var n=this;if(e instanceof p)return e.createProxy((function(e){return n.resolve(e,t)}));var r=I.get(e);if(!r||0===r.length){if(0===e.length)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=r.map(this.resolveParams(t,e));return new(e.bind.apply(e,u([void 0],o)))},e.prototype.resolveParams=function(e,t){var n=this;return function(r,o){var i,s,c,l;try{return"object"==typeof(l=r)&&"token"in l&&"multiple"in l?h(r)?r.multiple?(i=n.resolve(r.transform)).transform.apply(i,u([n.resolveAll(r.token)],r.transformArgs)):(s=n.resolve(r.transform)).transform.apply(s,u([n.resolve(r.token,e)],r.transformArgs)):r.multiple?n.resolveAll(r.token):n.resolve(r.token,e):h(r)?(c=n.resolve(r.transform,e)).transform.apply(c,u([n.resolve(r.token,e)],r.transformArgs)):n.resolve(r,e)}catch(e){throw new Error(function(e,t,n){var r,o,i,s,c=a(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1];return r="Cannot inject the dependency "+(s=t,(null===(i=void 0===c?null:c)?"at position #"+s:'"'+i.split(",")[s].trim()+'" at position #'+s)+' of "')+e.name+'" constructor. Reason:',void 0===o&&(o="    "),u([r],n.message.split("\n").map((function(e){return o+e}))).join("\n")}(t,o,e))}}},e}()),E="injectionTokens",P=function(e){return t=e,function(e,n,r){var o=Reflect.getOwnMetadata(E,e)||{};o[r]=t,Reflect.defineMetadata(E,o,e)};var t},R=function(){return function(e){I.set(e,function(e){var t=Reflect.getMetadata("design:paramtypes",e)||[],n=Reflect.getOwnMetadata(E,e)||{};return Object.keys(n).forEach((function(e){t[+e]=n[e]})),t}(e))}};if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");class L{constructor(e){this._value=e,this.ensureIsValidValue()}get value(){return this._value}ensureIsValidValue(){if(isNaN(this._value))throw RangeError("The value must be a number")}}class S extends L{constructor(e){super(e),this.ensureIsValidEquidistance()}ensureIsValidEquidistance(){if(this.value<10||this.value>1e4)throw RangeError("The equidistance must be between 10 and 10000")}}class k extends L{constructor(e){super(e),this.ensureIsValidLatitude()}ensureIsValidLatitude(){if(this.value<-84||this.value>-20)throw RangeError("The latitud must be between -84 and -20")}}class T extends L{constructor(e){super(e),this.ensureIsValidLongitude()}ensureIsValidLongitude(){if(this.value<-74||this.value>-52)throw RangeError("The latitud must be between -74 and -52")}}class M{constructor(e){this._value=e,this.ensureIsValidValue()}get value(){return this._value}ensureIsValidValue(){if(""===this._value)throw RangeError("The value cannot be empty")}}class O extends M{constructor(e){super(e)}}class A{post(e,t){return n=this,r=void 0,i=function*(){return(yield fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"text/plain"},redirect:"follow",referrerPolicy:"no-referrer",body:t})).json()},new((o=void 0)||(o=Promise))((function(e,t){function s(e){try{u(i.next(e))}catch(e){t(e)}}function a(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,a)}u((i=i.apply(n,r||[])).next())}));var n,r,o,i}}class D{constructor(e,t,n,r,o,i){this._longitudeLower=e,this._latitudeLower=t,this._longitudeUpper=n,this._latitudeUpper=r,this._equidistance=o,this._wpsEndpoint=i,this._baseRasterLayer=new M("geoprocess:alos_unificado")}get longitudeLower(){return this._longitudeLower}get latitudeLower(){return this._latitudeLower}get longitudeUpper(){return this._longitudeUpper}get latitudeUpper(){return this._latitudeUpper}get equidistance(){return this._equidistance}get wpsEndpoint(){return this._wpsEndpoint}get fullWpsEndpoint(){return`${this.wpsEndpoint.value}&request=Execute&identifier=gs:Contour`}get xmlInput(){return`<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n    <ows:Identifier>gs:Contour</ows:Identifier>\n    <wps:DataInputs>\n      <wps:Input>\n        <ows:Identifier>data</ows:Identifier>\n        <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wcs" method="POST">\n          <wps:Body>\n            <wcs:GetCoverage service="WCS" version="1.1.1">\n              <ows:Identifier>${this._baseRasterLayer.value}</ows:Identifier>\n              <wcs:DomainSubset>\n                <ows:BoundingBox crs="http://www.opengis.net/gml/srs/epsg.xml#4326">\n                  <ows:LowerCorner>${this._longitudeLower.value} ${this._latitudeLower.value}</ows:LowerCorner>\n                  <ows:UpperCorner>${this._longitudeUpper.value} ${this._latitudeUpper.value}</ows:UpperCorner>\n                </ows:BoundingBox>\n              </wcs:DomainSubset>\n              <wcs:Output format="image/tiff"/>\n            </wcs:GetCoverage>\n          </wps:Body>\n        </wps:Reference>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>band</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>0</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>simplify</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>true</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>smooth</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>false</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>interval</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>${this._equidistance.value}</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n    </wps:DataInputs>\n    <wps:ResponseForm>\n      <wps:RawDataOutput mimeType="application/json">\n        <ows:Identifier>result</ows:Identifier>\n      </wps:RawDataOutput>\n    </wps:ResponseForm>\n  </wps:Execute>`}}D.MAX_AREA_ALLOWED=1e8,D.MIN_VALLEY_EQUIDISTANCE_ALLOWED=10,D.MIN_MOUNTAIN_EQUIDISTANCE_ALLOWED=100,D.FIELDS=JSON.parse('[\n      {\n        "name": "Capa",\n        "element": "select",\n        "references": "drawedLayers",\n        "allowedTypes": ["rectangle"],\n        "points": ["ne", "sw"]\n      },\n      {\n        "name": "Equidistancia",\n        "element": "input",\n        "type": "number",\n        "min": 10,\n        "max": 10000\n      }\n    ]');var C=6371008.8,j={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*C,kilometers:6371.0088,kilometres:6371.0088,meters:C,metres:C,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:C/1852,radians:1,yards:6967335.223679999};function F(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function U(e,t,n){void 0===n&&(n={});for(var r=0,o=e;r<o.length;r++){var i=o[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return F({type:"Polygon",coordinates:e},t,n)}function q(e){return e%360*Math.PI/180}function V(e,t,n){if(null!==e)for(var r,o,i,s,a,u,c,l,p=0,f=0,h=e.type,w="FeatureCollection"===h,d="Feature"===h,y=w?e.features.length:1,g=0;g<y;g++){a=(l=!!(c=w?e.features[g].geometry:d?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var m=0,_=0;if(null!==(s=l?c.geometries[v]:c)){u=s.coordinates;var b=s.type;switch(p=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===t(u,f,g,m,_))return!1;f++,m++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===t(u[r],f,g,m,_))return!1;f++,"MultiPoint"===b&&m++}"LineString"===b&&m++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-p;o++){if(!1===t(u[r][o],f,g,m,_))return!1;f++}"MultiLineString"===b&&m++,"Polygon"===b&&_++}"Polygon"===b&&m++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(_=0,o=0;o<u[r].length;o++){for(i=0;i<u[r][o].length-p;i++){if(!1===t(u[r][o][i],f,g,m,_))return!1;f++}_++}m++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===V(s.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $(e,t){var n,r,o,i,s,a,u,c,l,p,f=0,h="FeatureCollection"===e.type,w="Feature"===e.type,d=h?e.features.length:1;for(n=0;n<d;n++){for(a=h?e.features[n].geometry:w?e.geometry:e,c=h?e.features[n].properties:w?e.properties:{},l=h?e.features[n].bbox:w?e.bbox:void 0,p=h?e.features[n].id:w?e.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,o=0;o<s;o++)if(null!==(i=u?a.geometries[o]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,f,c,l,p))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===t(i.geometries[r],f,c,l,p))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,f,c,l,p))return!1;f++}}function W(e,t,n){var r=n,o=!1;return function(e,t){!function(e,t){$(e,(function(e,n,r,o,i){var s,a=null===e?null:e.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==t(F(e,r,{bbox:o,id:i}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<e.coordinates.length;u++){var c=e.coordinates[u];if(!1===t(F({type:s,coordinates:c},r),n,u))return!1}}))}(e,(function(e,n,r){var o=0;if(e.geometry){var i=e.geometry.type;if("Point"!==i&&"MultiPoint"!==i){var s,a=0,u=0,c=0;return!1!==V(e,(function(i,l,p,f,h){if(void 0===s||n>a||f>u||h>c)return s=i,a=n,u=f,c=h,void(o=0);var w=function(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return F({type:"LineString",coordinates:e},t,n)}([s,i],e.properties);if(!1===t(w,n,r,h,o))return!1;o++,s=i}))&&void 0}}}))}(e,(function(e,i,s,a,u){r=!1===o&&void 0===n?e:t(r,e,i,s,a,u),o=!0})),r}var N=6378137;function B(e){return function(e,t,n){var r=0;return $(e,(function(e,t,n,o,i){r=r+function(e){var t,n=0;switch(e.type){case"Polygon":return G(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=G(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)})),r}(e)}function G(e){var t=0;if(e&&e.length>0){t+=Math.abs(K(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(K(e[n]))}return t}function K(e){var t,n,r,o,i,s,a=0,u=e.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,o=u-1,i=0):s===u-1?(r=u-1,o=0,i=1):(r=s,o=s+1,i=s+2),t=e[r],n=e[o],a+=(X(e[i][0])-X(t[0]))*Math.sin(X(n[1]));a=a*N*N/2}return a}function X(e){return e*Math.PI/180}function J(e){var t=[1/0,1/0,-1/0,-1/0];return V(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}J.default=J;var z=J;function H(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Q(e){return"Feature"===e.type?e.geometry:e}function Y(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var r=H(e),o=Q(t),i=o.type,s=t.bbox,a=o.coordinates;if(s&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(r,s))return!1;"Polygon"===i&&(a=[a]);for(var u=!1,c=0;c<a.length&&!u;c++)if(Z(r,a[c][0],n.ignoreBoundary)){for(var l=!1,p=1;p<a[c].length&&!l;)Z(r,a[c][p],!n.ignoreBoundary)&&(l=!0),p++;l||(u=!0)}return u}function Z(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var o=0,i=t.length-1;o<t.length;i=o++){var s=t[o][0],a=t[o][1],u=t[i][0],c=t[i][1];if(e[1]*(s-u)+a*(u-e[0])+c*(e[0]-s)==0&&(s-e[0])*(u-e[0])<=0&&(a-e[1])*(c-e[1])<=0)return!n;a>e[1]!=c>e[1]&&e[0]<(u-s)*(e[1]-a)/(c-a)+s&&(r=!r)}return r}function ee(e,t,n,r,o){var i=n[0],s=n[1],a=e[0],u=e[1],c=t[0],l=t[1],p=c-a,f=l-u,h=(n[0]-a)*f-(n[1]-u)*p;if(null!==o){if(Math.abs(h)>o)return!1}else if(0!==h)return!1;return r?"start"===r?Math.abs(p)>=Math.abs(f)?p>0?a<i&&i<=c:c<=i&&i<a:f>0?u<s&&s<=l:l<=s&&s<u:"end"===r?Math.abs(p)>=Math.abs(f)?p>0?a<=i&&i<c:c<i&&i<=a:f>0?u<=s&&s<l:l<s&&s<=u:"both"===r&&(Math.abs(p)>=Math.abs(f)?p>0?a<i&&i<c:c<i&&i<a:f>0?u<s&&s<l:l<s&&s<u):Math.abs(p)>=Math.abs(f)?p>0?a<=i&&i<=c:c<=i&&i<=a:f>0?u<=s&&s<=l:l<=s&&s<=u}var te=function(e,t,n){void 0===n&&(n={});for(var r=H(e),o=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(t),i=0;i<o.length-1;i++){var s=!1;if(n.ignoreEndVertices&&(0===i&&(s="start"),i===o.length-2&&(s="end"),0===i&&i+1===o.length-1&&(s="both")),ee(o[i],o[i+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1};function ne(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function re(e,t){return e[0]===t[0]&&e[1]===t[1]}let oe=class{ensureInputDataIsInTolerance(e){const t=this.pointsToPolygon(e.longitudeLower,e.latitudeLower,e.longitudeUpper,e.latitudeUpper);if(B(t)>D.MAX_AREA_ALLOWED)throw RangeError("The area requested must be less than 100km2");if(1==function(e,t){var n=Q(e),r=Q(t),o=n.type,i=r.type,s=n.coordinates,a=r.coordinates;switch(o){case"Point":switch(i){case"Point":return re(s,a);default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"Point":return function(e,t){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(re(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(e,t){for(var n=0,r=t.coordinates;n<r.length;n++){for(var o=r[n],i=!1,s=0,a=e.coordinates;s<a.length;s++)if(re(o,a[s])){i=!0;break}if(!i)return!1}return!0}(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"Point":return te(r,n,{ignoreEndVertices:!0});case"LineString":return function(e,t){for(var n=!1,r=0,o=t.coordinates;r<o.length;r++){var i=o[r];if(te({type:"Point",coordinates:i},e,{ignoreEndVertices:!0})&&(n=!0),!te({type:"Point",coordinates:i},e,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(e,t){for(var n=!1,r=0,o=t.coordinates;r<o.length;r++){var i=o[r];if(te(i,e,{ignoreEndVertices:!0})&&(n=!0),!te(i,e))return!1}return!!n}(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Point":return Y(r,n,{ignoreBoundary:!0});case"LineString":return function(e,t){var n,r,o=!1,i=0;if(!ne(z(e),z(t)))return!1;for(;i<t.coordinates.length-1;i++)if(Y({type:"Point",coordinates:(n=t.coordinates[i],r=t.coordinates[i+1],[(n[0]+r[0])/2,(n[1]+r[1])/2])},e,{ignoreBoundary:!0})){o=!0;break}return o}(n,r);case"Polygon":return function(e,t){if("Feature"===e.type&&null===e.geometry)return!1;if("Feature"===t.type&&null===t.geometry)return!1;if(!ne(z(e),z(t)))return!1;for(var n=0,r=Q(t).coordinates;n<r.length;n++)for(var o=0,i=r[n];o<i.length;o++)if(!Y(i[o],e))return!1;return!0}(n,r);case"MultiPoint":return function(e,t){for(var n=0,r=t.coordinates;n<r.length;n++)if(!Y(r[n],e,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}}(U([[[-73.90444332754741,-51.88846973694263],[-70.88203831519283,-20.86255705909867],[-62.863412772211284,-21.417692673612777],[-64.34377441091557,-28.69613739724218],[-62.67836756737324,-28.881182602080212],[-66.50263513402598,-52.690332291240786],[-73.90444332754741,-51.88846973694263]]]),t)&&e.equidistance.value<D.MIN_MOUNTAIN_EQUIDISTANCE_ALLOWED)throw RangeError("Equidistance must be grather than 100");if(e.equidistance.value<D.MIN_VALLEY_EQUIDISTANCE_ALLOWED)throw RangeError("Equidistance must be grather than 10")}pointsToPolygon(e,t,n,r){return U([[[n.value,r.value],[n.value,t.value],[e.value,t.value],[e.value,r.value],[n.value,r.value]]])}};oe=function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}([R()],oe);var ie=oe,se=function(e,t){return function(n,r){t(n,r,e)}};let ae=class{constructor(e,t){this.postman=e,this.tolaranceChecker=t}getFields(){return D.FIELDS}execute(e){return t=this,n=void 0,o=function*(){return this.ensureInputDataIsInTolerance(e),yield this.postman.post(e.fullWpsEndpoint,e.xmlInput)},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}u((o=o.apply(t,n||[])).next())}));var t,n,r,o}ensureInputDataIsInTolerance(e){this.tolaranceChecker.ensureInputDataIsInTolerance(e)}};ae=function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}([R(),se(0,P("Postman")),se(1,P("ToleranceChecker"))],ae);var ue=ae;x.register("Postman",{useClass:A}),x.register("ToleranceChecker",{useClass:ie});class ce{constructor(e,t){this.host=e,this.service=t||x.resolve(ue)}getFields(){return this.service.getFields()}execute(e,t,n,r,o){return i=this,s=void 0,u=function*(){const i=new D(new T(e),new k(t),new T(n),new k(r),new S(o),new O(this.host));return this.service.execute(i)},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{o(u.next(e))}catch(e){t(e)}}function r(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(n,r)}o((u=u.apply(i,s||[])).next())}));var i,s,a,u}}class le{constructor(e,t){this._longitude=e,this._latitude=t}get value(){return[this._longitude,this._latitude]}get toString(){return`${this._longitude.value},${this._latitude.value}`}toProcessString(){return`${this._longitude.value} ${this._latitude.value}`}}class pe{constructor(e){this._value=e}static createFromString(e){const t=[];return e.split(",").forEach((e=>{const n=e.trim().split(" ");t.push(new le(new T(parseFloat(n[0])),new k(parseFloat(n[1]))))})),new pe(t)}get value(){return this._value}toString(){const e=[];return this.value.forEach((t=>{e.push(t.toString)})),`[${e.join("],[")}]`}toProcessString(){const e=[];return this.value.forEach((t=>{e.push(t.toProcessString())})),`${e.join(",")}`}}class fe{constructor(e,t){this._line=e,this._wpsEndpoint=t}get line(){return this._line}get wpsEndpoint(){return this._wpsEndpoint}get jsonInput(){return`{"line": "${this.line.toProcessString()}"}`}}fe.MAX_LENGHT_ALLOWED=100,fe.FIELDS=JSON.parse('[\n      {\n        "name": "Capa",\n        "element": "select",\n        "references": "drawedLayers",\n        "allowedTypes": ["line"],\n        "points": ["ne", "sw"]\n      }\n    ]');var he=function(e,t,n){void 0===n&&(n={});var r=H(e),o=H(t),i=q(o[1]-r[1]),s=q(o[0]-r[0]),a=q(r[1]),u=q(o[1]),c=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return function(e,t){void 0===t&&(t="kilometers");var n=j[t];if(!n)throw new Error(t+" units is invalid");return e*n}(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)};let we=class{ensureInputDataIsInTolerance(e){const t=F(JSON.parse(`\n      {\n        "type": "LineString",\n        "coordinates": [${e.line.toString()}]\n      }`));if(void 0===(n={units:"kilometers"})&&(n={}),W(t,(function(e,t){var r=t.geometry.coordinates;return e+he(r[0],r[1],n)}),0)>100)throw RangeError("The line length requested must be less than 100km");var n}};we=function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}([R()],we);var de=we,ye=function(e,t){return function(n,r){t(n,r,e)}};let ge=class{constructor(e,t){this.postman=e,this.tolaranceChecker=t}getFields(){return fe.FIELDS}execute(e){return t=this,n=void 0,o=function*(){return this.ensureInputDataIsInTolerance(e),yield this.postman.post(e.wpsEndpoint.value,e.jsonInput)},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}u((o=o.apply(t,n||[])).next())}));var t,n,r,o}ensureInputDataIsInTolerance(e){this.tolaranceChecker.ensureInputDataIsInTolerance(e)}};ge=function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}([R(),ye(0,P("Postman")),ye(1,P("ElevationProfileToleranceChecker"))],ge);var ve=ge;x.register("Postman",{useClass:A}),x.register("ElevationProfileToleranceChecker",{useClass:de});class me{constructor(e,t){this.host=e,this.service=t||x.resolve(ve)}getFields(){return this.service.getFields()}execute(e){return t=this,n=void 0,o=function*(){const t=new fe(pe.createFromString(e),new O(this.host));return this.service.execute(t)},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}u((o=o.apply(t,n||[])).next())}));var t,n,r,o}}class _e{status(){return"Ok"}}class be extends L{constructor(e){super(e),this.ensureIsValidLevel()}ensureIsValidLevel(){if(this.value<0||this.value>1e4)throw RangeError("The equidistance must be between 0 and 10000")}}class Ie{constructor(e,t,n,r,o,i){this._longitudeLower=e,this._latitudeLower=t,this._longitudeUpper=n,this._latitudeUpper=r,this._level=o,this._wpsEndpoint=i,this._baseRasterLayer=new M("geoprocess:alos_unificado")}get longitudeLower(){return this._longitudeLower}get latitudeLower(){return this._latitudeLower}get longitudeUpper(){return this._longitudeUpper}get latitudeUpper(){return this._latitudeUpper}get level(){return this._level}get wpsEndpoint(){return this._wpsEndpoint}rectangle(){return`[\n      [\n        [${this.longitudeUpper.value}, ${this.latitudeUpper.value}],\n        [${this.longitudeUpper.value}, ${this.latitudeLower.value}],\n        [${this.longitudeLower.value}, ${this.latitudeLower.value}],\n        [${this.longitudeLower.value}, ${this.latitudeUpper.value}],\n        [${this.longitudeUpper.value}, ${this.latitudeUpper.value}],\n      ],\n    ]`}get fullWpsEndpoint(){return`${this.wpsEndpoint.value}&request=Execute&identifier=ras:PolygonExtraction`}get xmlInput(){return`<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n    <ows:Identifier>ras:PolygonExtraction</ows:Identifier>\n    <wps:DataInputs>\n      <wps:Input>\n        <ows:Identifier>data</ows:Identifier>\n        <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wps" method="POST">\n          <wps:Body>\n            \n            <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n              <ows:Identifier>ras:CropCoverage</ows:Identifier>\n              <wps:DataInputs>\n                <wps:Input>\n                  <ows:Identifier>coverage</ows:Identifier>\n                  <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wcs" method="POST">\n                    <wps:Body>\n                      <wcs:GetCoverage service="WCS" version="1.1.1">\n                        <ows:Identifier>${this._baseRasterLayer.value}</ows:Identifier>\n                        <wcs:DomainSubset>\n                          <ows:BoundingBox crs="http://www.opengis.net/gml/srs/epsg.xml#4326">\n                            <ows:LowerCorner>-74.000000946 -55.666705466</ows:LowerCorner>\n                            <ows:UpperCorner>-53.499547847 -21.666460109</ows:UpperCorner>\n                          </ows:BoundingBox>\n                        </wcs:DomainSubset>\n                        <wcs:Output format="image/tiff"/>\n                      </wcs:GetCoverage>\n                    </wps:Body>\n                  </wps:Reference>\n                </wps:Input>\n                <wps:Input>\n                  <ows:Identifier>cropShape</ows:Identifier>\n                  <wps:Data>\n                  <wps:ComplexData mimeType="application/json"><![CDATA[{\n                    "geometry": {\n                    "type": "Polygon",\n                    "coordinates": [ ${this.rectangle()} ] } }]]></wps:ComplexData>\n                  </wps:Data>\n                </wps:Input>\n              </wps:DataInputs>\n              <wps:ResponseForm>\n                <wps:RawDataOutput mimeType="image/tiff">\n                  <ows:Identifier>result</ows:Identifier>\n                </wps:RawDataOutput>\n              </wps:ResponseForm>\n            </wps:Execute>\n\n          </wps:Body>\n        </wps:Reference>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>band</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>0</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>ranges</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>[0;${this._level.value}]</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n    </wps:DataInputs>\n    <wps:ResponseForm>\n      <wps:RawDataOutput mimeType="application/json">\n        <ows:Identifier>result</ows:Identifier>\n      </wps:RawDataOutput>\n    </wps:ResponseForm>\n  </wps:Execute>`}}Ie.MAX_AREA_ALLOWED=1e8,Ie.FIELDS=JSON.parse('[\n      {\n        "name": "Capa",\n        "element": "select",\n        "references": "drawedLayers",\n        "allowedTypes": ["rectangle"],\n        "points": ["ne", "sw"]\n      },\n      {\n        "name": "Cota",\n        "element": "input",\n        "type": "number",\n        "min": 0,\n        "max": 10000\n      }\n    ]');let xe=class{ensureInputDataIsInTolerance(e){if(B(this.pointsToPolygon(e.longitudeLower,e.latitudeLower,e.longitudeUpper,e.latitudeUpper))>Ie.MAX_AREA_ALLOWED)throw RangeError("The area requested must be less than 100km2")}pointsToPolygon(e,t,n,r){return U([[[n.value,r.value],[n.value,t.value],[e.value,t.value],[e.value,r.value],[n.value,r.value]]])}};xe=function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}([R()],xe);var Ee=xe,Pe=function(e,t){return function(n,r){t(n,r,e)}};let Re=class{constructor(e,t){this.postman=e,this.tolaranceChecker=t}getFields(){return Ie.FIELDS}execute(e){return t=this,n=void 0,o=function*(){return this.ensureInputDataIsInTolerance(e),yield this.postman.post(e.fullWpsEndpoint,e.xmlInput)},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}u((o=o.apply(t,n||[])).next())}));var t,n,r,o}ensureInputDataIsInTolerance(e){this.tolaranceChecker.ensureInputDataIsInTolerance(e)}};Re=function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}([R(),Pe(0,P("Postman")),Pe(1,P("ToleranceChecker"))],Re);var Le=Re;x.register("Postman",{useClass:A}),x.register("ToleranceChecker",{useClass:Ee});class Se{constructor(e,t){this.host=e,this.service=t||x.resolve(Le)}getFields(){return this.service.getFields()}execute(e,t,n,r,o){return i=this,s=void 0,u=function*(){const i=new Ie(new T(e),new k(t),new T(n),new k(r),new be(o),new O(this.host));return this.service.execute(i)},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{o(u.next(e))}catch(e){t(e)}}function r(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(n,r)}o((u=u.apply(i,s||[])).next())}));var i,s,a,u}}}(),GeoserviceFactory=r}();
//# sourceMappingURL=main.js.map